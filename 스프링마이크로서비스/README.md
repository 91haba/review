# 스프링 마이크로서비스

## 소개

사내 책읽기 모임으로 시작!  

### 규칙

* 사회, 서기를 매회마다 선출  
* 12:00 ~ 13:30까지 하되, 1시에 일이 있을 경우 가면 됨

## 1주차 스터디

### 마이크로서비스로의 진화

* 진화의 촉매 : 비즈니스적 요구
  * 기존의 마이크로서비스의 장점을 얘기할때는 기술적 관점에서의 장점만을 소개해 와닿지 않았으나,
  * p.38 비즈니스적 요구를 먼저 얘기하고 소개를 들어간것이 와닿음 
  * p.39 그래프 동의?

* 마이크로서비스란 무엇인가?
  * p.45 분리의 범위가 인프라 영역까지 이동한것뿐이지 컴포넌트 단위로 분리하는 것은 동일한듯
  * p.46 데이터베이스는 어떻게 분리해서 트랜잭션 관리하는지? 

* 마이크로서비스와 벌집
  * 책의 내용이 굉장히 추상적
  * SOLID의 단일책임원칙 같은 경우에도 정말 작은 단위의 책임을 얘기하는데 여기선 **주문**에 단일책임워칙을 적용하는것이 잘 이해가 안됨

### 마이크로서비스로의 진화

* MSA는 정말 상태를 안가질수 있나?
  * 로그인 정보를 어딘가는 가지고 있어야 하지 않나?

## 1주차 토론

### p.39 그래프에 동의?

* 기민함 
  * 요구사항의 변경에 빨리 반응하는것을 얘기

* MSA의 목표가 높은 애자일성이 되야 한다가 아닐까?
* 배포가 느려지지 않을까?
* 상황마다 애자일성의 그래프 모양이 다를것 같음 
  * 규모가 작을 경우엔 오히려 일체형이 더 애자일성이 높을것으로 예상
* 그래프에서 일체형과 마이크로서비스의 비교군이 극단적 사례를 들고 있지 않을까
* 꼭 데이터베이스까지 나눠야 마이크로서비스라고 할 수 있을까?
  * 논리적 분리가 되어있고 추상화 되어있으면 마이크로서비스로 볼 수 있지 않을까?

### 클라이언트 테스트 자동화는 어떻게?

### 서비스 연출이란?

### p.61 각 팀의 복구 시나리오

* 블루그린 배포
  * 기존 장애없는 버전을 하나의 존에 두고, 신규 버전을 배포하는 존을 둔 뒤에 신규버전 배포후 문제가 발생할 경우 바로 장애없는 버전으로 트래픽을 우회시키는 무중단배포 & 장애복구 기법

* 넷플릭스 장애 복구 사례
  1. 사람이 눈으로 계속 확인
  2. 지속적 헬스체크로 장애 시점에 알람이 오도록
  3. 일상적인 장애 상황을 미리 예측하고 대응하도록 자동화 
  4. 머신러닝으로 패턴을 저장하여 등록된 장애는 자체치유 하도록

## 1주차 개인 공부 - 1장

### 육각형 아키텍처

[링크](http://alistair.cockburn.us/Hexagonal+architecture) 참고

### 마이크로 서비스의 원칙

* 마이크로서비스는 해당 서비스만으로 배포가 완료 될 수 있어야 한다.
  * 전통적인 서비스에서는 톰캣과 같은 WAS에 WAR/EAR 파일을 배포하는 방식이지만, 마이크로 서비스에서는 JAR 실행만으로 끝내도록 한다.

### 마이크로 서비스의 특징

* 서비스가 일급 시민
  * Javascript의 function이 일급시민인 것처럼, 마이크로서비스에서는 **서비스가 일급시민**이다. 
  * 서비스의 종단점을 외부에 오픈하되, 그외 나머지는 가린다.
  * 즉, API를 통해서만 서로 상호작용 한다.

### 동적이고 분산돼 있는 마이크로 서비스

쇼핑을 한다라는 기능이 수행된다고 하면, 이전 방식(SOA)에서는 ESB (엔터프라이즈 서비스 버스)를 통해 하나하나 필요한 API를 관리하는 대상이 있다.  
반면, 마이크로 서비스에서는 각각이 API는 결합되지 않은 채로 상호 작용 한다. 